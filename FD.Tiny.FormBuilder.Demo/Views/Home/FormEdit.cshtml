
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title></title>
    <!--引入gis地图样式-->
    <link rel="stylesheet" type="text/css" href="http://www.cszfp.net:7080/arcgis_js_api/library/3.8/3.8/js/dojo/dijit/themes/tundra/tundra.css" />
    <link rel="stylesheet" type="text/css" href="http://www.cszfp.net:7080/arcgis_js_api/library/3.8/3.8/js/esri/css/esri.css" />
    <!--引入quill样式-->
    <link href="~/Scripts/plug/quill/quill.snow.css" rel="stylesheet" />
    <!-- 引入elementui样式 -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <!-- 引入vue2-scrollbar样式 -->
    <link href="~/Scripts/plug/vue2-scrollbar/style/vue2-scrollbar.css" rel="stylesheet" />
    <!-- 引入iconfont图标库 -->
    <link rel="stylesheet" href="//at.alicdn.com/t/font_804038_m7zphuaqknm.css">

    <link href="~/Content/css/style.css" rel="stylesheet" />
    <link href="~/Content/css/labelTemplate.css" rel="stylesheet" />

    <script src="~/Scripts/plug/vue/vue.js"></script>
    <!-- 引入elementui组件库 -->
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <!-- 引入vue2-scrollbar组件库 -->
    <script src="~/Scripts/plug/vue2-scrollbar/vue2-scrollbar.js"></script>
    <script src="~/Scripts/plug/axios/axios.min.js"></script>
    <script src="~/Scripts/plug/draggable/Sortable.min.js"></script>
    <script src="~/Scripts/plug/draggable/vuedraggable.min.js"></script>
    <script src="~/Scripts/plug/mock/mock.js"></script>
    <script src="~/Scripts/plug/mock/mockData.js"></script>
    <script src="~/Scripts/common/Config.js"></script>
    <script src="~/Scripts/common/common.js"></script>
    <script src="~/Scripts/common/Request.js"></script>
    <script src="~/Scripts/common/data.js"></script>
    <!--引入gis地图-->
    <script type="text/javascript" defer="defer" src="http://www.cszfp.net:7080/arcgis_js_api/library/3.8/3.8/init.js"></script>
    <!--引入百度地图V3.0-->
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=3.0&ak=9xaY4e2UlCbkuvNr3rCzgsELWHcjbKeA"></script>
    <!--引入quill.js-->
    <script src="~/Scripts/plug/quill/quill.min.js"></script>

    <script src="~/Scripts/dynamicForm/LabelTemplate.js"></script>
    <script src="~/Scripts/dynamicForm/QuillRtf.js"></script>
    <script src="~/Scripts/dynamicForm/GisMap.js"></script>
    <script src="~/Scripts/dynamicForm/BaiduMap.js"></script>
    <script src="~/Scripts/dynamicForm/DynamicForm.js"></script>

</head>
<body>
    <div class="df-form-edit" id="DfFormEedit" style="display:none;">
        <div class="page-container">
            <div class="form-config-left">
                <div style="text-align:center;font-size:18px;padding:10px;">标签库</div>
                <el-collapse v-model="activeComponentsName" accordion>
                    <el-collapse-item v-for="(group,index) in FormComponents" :key="index" :name="group.component_group">
                        <template slot="title">
                            <span v-text="group.component_group" style="font-weight:bold;"></span>
                        </template>
                        <draggable v-model="group.component_list" class="config-filter"
                                   :options="{group:{ name:'labelList',  pull:'clone', put:false },
                                              ghostClass:'form-config-center-row-ghost',
                                              sort:false,
                                              animation:300}">
                            <div v-for="(component, _index) in group.component_list" :key="_index" class="form-config-left-item">
                                <span v-text="component.label_name_chs"></span>
                            </div>
                        </draggable>
                    </el-collapse-item>
                </el-collapse>
            </div>
			<div class="form-config-center">
				
                <div style="text-align:right;position:absolute;right:510px;z-index:99;">
                    <el-button type="text" title="设置" v-on:click="formSetVisible=true">
                        <i class="iconfont icon-shezhi" style="font-size:24px;top:2px;"></i>
                    </el-button>
                    <el-button type="text" title="预览" v-on:click="formPreviewVisible=true">
                        <i class="iconfont icon-yulan" style="font-size:20px;"></i>
                    </el-button>
                </div>
				<el-tabs v-model="labelActiveName" class="form-label-type-tab">
					<el-tab-pane label="控件标签" name="control"></el-tab-pane>
					<el-tab-pane label="变量标签" name="variable"></el-tab-pane>
					<el-tab-pane label="条件标签" name="condition"></el-tab-pane>
				</el-tabs>
				<div class="form-config-content" id="FormContent">
					<vue-scrollbar classes="form-label-scrollbar" id="FormLabelContent" ref="FormLabelScrollbar">
						<div class="scroll-me">
							<draggable v-model="setLableList" v-on:update="updateData" v-on:add="addData"
									   :options="{group:{ name:'labelList',  pull:false, put:true },
                                       disabled:labelActiveName === 'variable' || labelActiveName === 'condition',
                                       ghostClass:'form-config-center-row-ghost',animation:300}" style="min-height:500px;">
								<div v-for="(label,index) in setLableList" :key="index"
									 v-on:click="settingData(index)"
									 :class="['form-config-center-row',index===currentLabelindex?'row-active':'']">
									<div v-if="labelActiveName === 'control'">
										<div v-if="label.label_type === LabelType.control">
											<div v-if="label.label_config.control_type==='map_gis'">
												<label-template :lable-type="label.control_type" class="form-config-center-control" style="margin-left:2.5%;"></label-template>
											</div>
											<div v-else-if="label.label_config.control_type==='map_baidu'">
												<label-template :lable-type="label.control_type" class="form-config-center-control" style="margin-left:2.5%;"></label-template>
											</div>
											<div v-else-if="label.label_config.control_type==='rtf'">
												<label-template :lable-type="label.control_type" class="form-config-center-control" style="margin-left:2.5%;"></label-template>
											</div>
											<el-row v-else>
												<el-col :span="6">
													<label class="form-config-center-label">{{label.label_name_chs}}</label>
												</el-col>
												<el-col :span="18">
													<label-template :lable-type="label.label_config.control_type" class="form-config-center-control"></label-template>
												</el-col>
											</el-row>
										</div>
									</div>
									<div v-else-if="labelActiveName === 'variable'">
                                        <div v-if="label.label_type === LabelType.variable" style="padding:20px 20px;">
                                            {{label.label_name_chs}}
                                        </div>
									</div>
									<div v-else>
                                        <div v-if="label.label_type === LabelType.condition" style="padding:20px 20px;">
                                            {{label.label_name_chs}}
                                        </div>
									</div>
								</div>

							</draggable>
						</div>
					</vue-scrollbar>

				</div>
			</div>
            <div class="form-config-right" id="FormRight">
                <div v-if="labelEditChange">
                    <div v-if="currentLabelData.label_type===LabelType.control">
                        <el-tabs v-model="tabActiveName" v-if="currentLabelData.label_config.control_config.control_type==='input_base'">
                            <el-tab-pane label="常规" name="normal">
                                <el-form :ref="'Form'+currentLabelData.label_id" :model="currentLabelData" label-width="120px">
                                    <el-form-item label="标签中文名" prop="label_name_chs" :rules="[{ required: true, message: '请输入标签中文名', trigger: 'blur' }]">
                                        <el-input v-model="currentLabelData.label_name_chs" placeholder="请输入标签中文名"></el-input>
                                    </el-form-item>
                                    <el-form-item label="分组名称">
                                        <el-input v-model="currentLabelData.label_config.control_config.group_name" placeholder="请输入分组名称"></el-input>
                                    </el-form-item>
                                    <el-form-item label="默认值">
                                        <el-input v-model="currentLabelData.default_value" placeholder="请输入默认值"></el-input>
                                    </el-form-item>
                                    <el-form-item label="数据类型">
                                        <el-select v-model="currentLabelData.data_type" placeholder="请选择数据类型">
                                            <el-option v-for="(value,key) in DataType" :key="value"
                                                       :label="key" :value="value"></el-option>
                                        </el-select>
                                    </el-form-item>
                                    <el-form-item label="占位文本">
                                        <el-input v-model="getLableConfigItem('placeholder').value" placeholder="请输入占位文本"></el-input>
                                    </el-form-item>
                                    <el-form-item label="是否可清空">
                                        <el-radio-group v-model="getLableConfigItem('clearable').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                    <el-form-item label="是否只读">
                                        <el-radio-group v-model="getLableConfigItem('readonly').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                </el-form>
                            </el-tab-pane>
                            <el-tab-pane label="验证" name="validator"></el-tab-pane>
                            <el-tab-pane label="数据源" name="data"></el-tab-pane>
                            <el-tab-pane label="关联" name="relate">
                                <el-table :data="currentLabelData.label_config.relate_config?currentLabelData.label_config.relate_config.relate_list:[]" style="width: 100%">
                                    <el-table-column prop="relate_name"
                                                     label="关联名称"
                                                     align="center"
                                                     width="120">
                                    </el-table-column>
                                    <el-table-column prop="operator_str"
                                                     label="关联操作"
                                                     align="center"
                                                     width="120">
                                        <template slot-scope="scope">
                                            <span v-text="getRelateRuleProp(scope.row.operator_str)"></span>
                                        </template>
                                    </el-table-column>
                                    <el-table-column prop="label"
                                                     align="center"
                                                     label="关联标签">
                                        <template slot-scope="scope">
                                            <span v-text="scope.row.label.label_name_chs"></span>
                                        </template>
                                    </el-table-column>
                                    <el-table-column label="操作"
                                                     align="center"
                                                     width="60">
                                        <template slot-scope="scope">
                                            <el-button type="text" v-on:click="relateDelete(scope.$index)"><i class="el-icon-delete"></i></el-button>
                                        </template>
                                    </el-table-column>
                                </el-table>
                                <div style="text-align:right;padding:10px;">
                                    <el-button type="primary" icon="el-icon-plus" title="新增" v-on:click="relateAddDialog = true" circle></el-button>
                                </div>
                                <el-dialog title="新增关联" :visible.sync="relateAddDialog" v-on:close="relateAddDialogClose" width="30%">
                                    <el-form ref="RelateAddForm" :model="relateAddForm" label-width="80px">
                                        <el-form-item prop="relateName" label="关联名称" :rules="[{required: true, message: '请输入关联名称', trigger: 'blur'}]">
                                            <el-input v-model="relateAddForm.relateName" placeholder="关联名称"></el-input>
                                        </el-form-item>
                                        <el-form-item prop="operatorStr" label="关联操作" :rules="[{required: true, message: '请选择关联操作', trigger: 'change'}]">
                                            <el-select v-model="relateAddForm.operatorStr" clearable placeholder="关联操作">
                                                <el-option v-for="(value,key) in RelateRule" :key="value"
                                                           :label="key" :value="value">
                                                </el-option>
                                            </el-select>
                                        </el-form-item>
                                        <el-form-item prop="label" label="关联标签" :rules="[{required: true, message: '请选择关联标签', type:'number', trigger: 'change'}]">
                                            <el-select v-model="relateAddForm.label" clearable placeholder="关联标签">
                                                <el-option v-for="(item,index) in getLabelsExceptSelf()" :key="index"
                                                           :label="item.label_name_chs" :value="item.label_id">
                                                </el-option>
                                            </el-select>
                                        </el-form-item>
                                    </el-form>
                                    <span slot="footer" class="dialog-footer">
                                        <el-button v-on:click="relateAddDialog = false">取 消</el-button>
                                        <el-button type="primary" v-on:click="relateAdd">确 定</el-button>
                                    </span>
                                </el-dialog>
                            </el-tab-pane>
                            <el-tab-pane label="格式化" name="format"></el-tab-pane>
                        </el-tabs>
                        <el-tabs v-model="tabActiveName" v-else-if="currentLabelData.label_config.control_config.control_type==='input_autocomplete'">
                            <el-tab-pane label="常规" name="normal">
                                <el-form :ref="'Form'+currentLabelData.label_id" :model="currentLabelData" label-width="120px">
                                    <el-form-item label="标签中文名" prop="label_name_chs" :rules="[{ required: true, message: '请输入标签中文名', trigger: 'blur' }]">
                                        <el-input v-model="currentLabelData.label_name_chs" placeholder="请输入标签中文名"></el-input>
                                    </el-form-item>
                                    <el-form-item label="分组名称">
                                        <el-input v-model="currentLabelData.label_config.control_config.group_name" placeholder="请输入分组名称"></el-input>
                                    </el-form-item>
                                    <el-form-item label="默认值">
                                        <el-input v-model="currentLabelData.default_value" placeholder="请输入默认值"></el-input>
                                    </el-form-item>
                                    <el-form-item label="数据类型">
                                        <el-select v-model="currentLabelData.data_type" placeholder="请选择数据类型">
                                            <el-option v-for="(value,key) in DataType" :key="value"
                                                       :label="key" :value="value"></el-option>
                                        </el-select>
                                    </el-form-item>
                                    <el-form-item label="占位文本">
                                        <el-input v-model="getLableConfigItem('placeholder').value" placeholder="请输入占位文本"></el-input>
                                    </el-form-item>
                                    <el-form-item label="是否可清空">
                                        <el-radio-group v-model="getLableConfigItem('clearable').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                    <el-form-item label="是否只读">
                                        <el-radio-group v-model="getLableConfigItem('readonly').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                    <el-form-item label="激活即列出数据">
                                        <el-radio-group v-model="getLableConfigItem('trigger-on-focus').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                </el-form>
                            </el-tab-pane>
                            <el-tab-pane label="验证" name="validator"></el-tab-pane>
                            <el-tab-pane label="数据源" name="data">
                                <div>
                                    <span>数据源类型</span>
                                    <el-select v-model="tempDataSourceConfig.data_source_type" v-on:change="handledDataTypeChange" clearable placeholder="请选择">
                                        <el-option v-for="(value,key) in DataSourceType" :key="value"
                                                   :label="key"
                                                   :value="value">
                                        </el-option>
                                    </el-select>
                                </div>
                                <div v-if="tempDataSourceConfig.data_source_type===DataSourceType.Dict" class="f-label-config-data-type">
                                    <div>
                                        <span>字典类型</span>
                                        <el-select v-model="tempDataSourceConfig.dic_type_id" v-on:change="handledDictTypeChange" clearable placeholder="请选择">
                                            <el-option v-for="(dict,index) in DictTest" :key="index"
                                                       :label="dict.dic_type_name"
                                                       :value="dict.dic_type_id">
                                            </el-option>
                                        </el-select>
                                    </div>
                                    <div v-if="tempDataSourceConfig.dic_type_id!==''" style="margin-top:10px;">
                                        <el-checkbox :indeterminate="dictIndeterminate" v-model="dictIndeterminateCheckAll" v-on:change="handleDictIndeterminateCheckAll">全选</el-checkbox>
                                    </div>
                                    <div class="f-label-config-data-dic-checkbox">
                                        <el-checkbox-group v-model="dictChecked" v-on:change="handledDictCheckedChange">
                                            <el-checkbox v-for="par in dictPars" :label="par.dic_par_id" :key="par.dic_par_id">{{par.dic_par_name}}</el-checkbox>
                                        </el-checkbox-group>
                                    </div>
                                </div>
                                <div v-else-if="tempDataSourceConfig.data_source_type===DataSourceType.Custom" class="f-label-config-data-type">
                                    <el-form :model="tempDataSourceConfig" ref="dynamicValidateForm" label-width="80px">
                                        <el-form-item prop="value"
                                                      label="数据值"
                                                      :rules="[{ required: true, message: '请输入数据值', trigger: 'blur' }]">
                                            <el-input v-model="tempDataSourceConfig.value" type="textarea" :autosize="{ minRows: 3, maxRows: 5}"></el-input>
                                        </el-form-item>
                                        <el-form-item prop="separtor"
                                                      label="分割符"
                                                      :rules="[{ required: true, message: '请输入分割符', trigger: 'blur' }]">
                                            <el-input v-model="tempDataSourceConfig.separtor"></el-input>
                                        </el-form-item>
                                        <el-form-item label="结果预览">
                                            <span v-text="getDataSourceConfigCustomResult()"></span>
                                        </el-form-item>
                                    </el-form>
                                </div>
                                <div v-else-if="tempDataSourceConfig.data_source_type===DataSourceType.DataApi" class="f-label-config-data-type">
                                    <div>
                                        <span>数据源</span>
                                        <el-select v-model="tempDataSourceConfig.api_id" v-on:change="handledDataApiChange" clearable placeholder="请选择">
                                            <el-option v-for="(api,index) in dataApis" :key="index"
                                                       :label="api.api_name"
                                                       :value="api.api_id">
                                            </el-option>
                                        </el-select>
                                    </div>
                                    <div v-if="tempDataSourceConfig.api_id!==''" style="margin-top:10px;">
                                        <el-row v-for="(param,index) in tempDataApiParam" :key="index">
                                            <el-col :span="8" style="text-align:right;height:40px;line-height:40px;">
                                                <span v-text="param.parameter_name_chs+' ('+(param.is_required?'必填':'选填')+')'"></span>
                                            </el-col>
                                            <el-col :span="4" style="text-align:center;height:40px;line-height:40px;">
                                                <i class="iconfont icon-zhixiang" style="font-size:24px;"></i>
                                            </el-col>
                                            <el-col :span="8">
                                                <el-select v-model="param.parameter_value" :clearable="!param.is_required" filterable placeholder="请选择">
                                                    <el-option label="变量1" value="变量1"></el-option>
                                                    <el-option label="变量2" value="变量2"></el-option>
                                                    <el-option label="变量3" value="变量3"></el-option>
                                                    <el-option label="变量4" value="变量4"></el-option>
                                                    <el-option label="变量5" value="变量5"></el-option>
                                                </el-select>
                                            </el-col>
                                        </el-row>
                                    </div>
                                </div>
                            </el-tab-pane>
                            <el-tab-pane label="关联" name="relate"></el-tab-pane>
                            <el-tab-pane label="格式化" name="format"></el-tab-pane>
                        </el-tabs>
                        <el-tabs v-model="tabActiveName" v-else-if="currentLabelData.label_config.control_config.control_type==='input_textarea'">
                            <el-tab-pane label="常规" name="normal">
                                <el-form :ref="'Form'+currentLabelData.label_id" :model="currentLabelData" label-width="120px">
                                    <el-form-item label="标签中文名" prop="label_name_chs" :rules="[{ required: true, message: '请输入标签中文名', trigger: 'blur' }]">
                                        <el-input v-model="currentLabelData.label_name_chs" placeholder="请输入标签中文名"></el-input>
                                    </el-form-item>
                                    <el-form-item label="分组名称">
                                        <el-input v-model="currentLabelData.label_config.control_config.group_name" placeholder="请输入分组名称"></el-input>
                                    </el-form-item>
                                    <el-form-item label="默认值">
                                        <el-input v-model="currentLabelData.default_value" placeholder="请输入默认值"></el-input>
                                    </el-form-item>
                                    <el-form-item label="数据类型">
                                        <el-select v-model="currentLabelData.data_type" placeholder="请选择数据类型">
                                            <el-option v-for="(value,key) in DataType" :key="value"
                                                       :label="key" :value="value"></el-option>
                                        </el-select>
                                    </el-form-item>
                                    <el-form-item label="占位文本">
                                        <el-input v-model="getLableConfigItem('placeholder').value" placeholder="请输入占位文本"></el-input>
                                    </el-form-item>
                                    <el-form-item label="内容高度">
                                        <el-slider v-model="getLableConfigItem('autosize').value" range show-stops :min="1" :max="10"></el-slider>
                                    </el-form-item>
                                    <el-form-item label="缩放">
                                        <el-radio-group v-model="getLableConfigItem('resize').value">
                                            <el-radio label="none">无</el-radio>
                                            <el-radio label="both">二者都</el-radio>
                                            <el-radio label="horizontal">横向</el-radio>
                                            <el-radio label="vertical">纵向</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                    <el-form-item label="是否可清空">
                                        <el-radio-group v-model="getLableConfigItem('clearable').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                    <el-form-item label="是否只读">
                                        <el-radio-group v-model="getLableConfigItem('readonly').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                </el-form>
                            </el-tab-pane>
                            <el-tab-pane label="验证" name="validator"></el-tab-pane>
                            <el-tab-pane label="数据源" name="data"></el-tab-pane>
                            <el-tab-pane label="关联" name="relate">
                                <el-table :data="currentLabelData.label_config.relate_config?currentLabelData.label_config.relate_config.relate_list:[]" style="width: 100%">
                                    <el-table-column prop="relate_name"
                                                     label="关联名称"
                                                     align="center"
                                                     width="120">
                                    </el-table-column>
                                    <el-table-column prop="operator_str"
                                                     label="关联操作"
                                                     align="center"
                                                     width="120">
                                        <template slot-scope="scope">
                                            <span v-text="getRelateRuleProp(scope.row.operator_str)"></span>
                                        </template>
                                    </el-table-column>
                                    <el-table-column prop="label"
                                                     align="center"
                                                     label="关联标签">
                                        <template slot-scope="scope">
                                            <span v-text="scope.row.label.label_name_chs"></span>
                                        </template>
                                    </el-table-column>
                                    <el-table-column label="操作"
                                                     align="center"
                                                     width="60">
                                        <template slot-scope="scope">
                                            <el-button type="text" v-on:click="relateDelete(scope.$index)"><i class="el-icon-delete"></i></el-button>
                                        </template>
                                    </el-table-column>
                                </el-table>
                                <div style="text-align:right;padding:10px;">
                                    <el-button type="primary" icon="el-icon-plus" title="新增" v-on:click="relateAddDialog = true" circle></el-button>
                                </div>
                                <el-dialog title="新增关联" :visible.sync="relateAddDialog" v-on:close="relateAddDialogClose" width="30%">
                                    <el-form ref="RelateAddForm" :model="relateAddForm" label-width="80px">
                                        <el-form-item prop="relateName" label="关联名称" :rules="[{required: true, message: '请输入关联名称', trigger: 'blur'}]">
                                            <el-input v-model="relateAddForm.relateName" placeholder="关联名称"></el-input>
                                        </el-form-item>
                                        <el-form-item prop="operatorStr" label="关联操作" :rules="[{required: true, message: '请选择关联操作', trigger: 'change'}]">
                                            <el-select v-model="relateAddForm.operatorStr" clearable placeholder="关联操作">
                                                <el-option v-for="(value,key) in RelateRule" :key="value"
                                                           :label="key" :value="value">
                                                </el-option>
                                            </el-select>
                                        </el-form-item>
                                        <el-form-item prop="label" label="关联标签" :rules="[{required: true, message: '请选择关联标签', type:'number', trigger: 'change'}]">
                                            <el-select v-model="relateAddForm.label" clearable placeholder="关联标签">
                                                <el-option v-for="(item,index) in getLabelsExceptSelf()" :key="index"
                                                           :label="item.label_name_chs" :value="item.label_id">
                                                </el-option>
                                            </el-select>
                                        </el-form-item>
                                    </el-form>
                                    <span slot="footer" class="dialog-footer">
                                        <el-button v-on:click="relateAddDialog = false">取 消</el-button>
                                        <el-button type="primary" v-on:click="relateAdd">确 定</el-button>
                                    </span>
                                </el-dialog>
                            </el-tab-pane>
                            <el-tab-pane label="格式化" name="format"></el-tab-pane>
                        </el-tabs>
                        <el-tabs v-model="tabActiveName" v-else-if="currentLabelData.label_config.control_config.control_type==='select'">
                            <el-tab-pane label="常规" name="normal">
                                <el-form :ref="'Form'+currentLabelData.label_id" :model="currentLabelData" label-width="120px">
                                    <el-form-item label="标签中文名" prop="label_name_chs" :rules="[{ required: true, message: '请输入标签中文名', trigger: 'blur' }]">
                                        <el-input v-model="currentLabelData.label_name_chs" placeholder="请输入标签中文名"></el-input>
                                    </el-form-item>
                                    <el-form-item label="分组名称">
                                        <el-input v-model="currentLabelData.label_config.control_config.group_name" placeholder="请输入分组名称"></el-input>
                                    </el-form-item>
                                    <el-form-item label="默认值">
                                        <el-input v-model="currentLabelData.default_value" placeholder="请输入默认值"></el-input>
                                    </el-form-item>
                                    <el-form-item label="数据类型">
                                        <el-select v-model="currentLabelData.data_type" placeholder="请选择数据类型">
                                            <el-option v-for="(value,key) in DataType" :key="value"
                                                       :label="key" :value="value"></el-option>
                                        </el-select>
                                    </el-form-item>
                                    <el-form-item label="占位文本">
                                        <el-input v-model="getLableConfigItem('placeholder').value" placeholder="请输入占位文本"></el-input>
                                    </el-form-item>
                                    <el-form-item label="是否可清空">
                                        <el-radio-group v-model="getLableConfigItem('clearable').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                    <el-form-item label="是否只读">
                                        <el-radio-group v-model="getLableConfigItem('readonly').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                    <el-form-item label="是否可搜索">
                                        <el-radio-group v-model="getLableConfigItem('filterable').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                </el-form>
                            </el-tab-pane>
                            <el-tab-pane label="验证" name="validator"></el-tab-pane>
                            <el-tab-pane label="数据源" name="data">
                                <div>
                                    <span>数据源类型</span>
                                    <el-select v-model="tempDataSourceConfig.data_source_type" v-on:change="handledDataTypeChange" clearable placeholder="请选择">
                                        <el-option v-for="(value,key) in DataSourceType" :key="value"
                                                   :label="key"
                                                   :value="value">
                                        </el-option>
                                    </el-select>
                                </div>
                                <div v-if="tempDataSourceConfig.data_source_type===DataSourceType.Dict" class="f-label-config-data-type">
                                    <div>
                                        <span>字典类型</span>
                                        <el-select v-model="tempDataSourceConfig.dic_type_id" v-on:change="handledDictTypeChange" clearable placeholder="请选择">
                                            <el-option v-for="(dict,index) in DictTest" :key="index"
                                                       :label="dict.dic_type_name"
                                                       :value="dict.dic_type_id">
                                            </el-option>
                                        </el-select>
                                    </div>
                                    <div v-if="tempDataSourceConfig.dic_type_id!==''" style="margin-top:10px;">
                                        <el-checkbox :indeterminate="dictIndeterminate" v-model="dictIndeterminateCheckAll" v-on:change="handleDictIndeterminateCheckAll">全选</el-checkbox>
                                    </div>
                                    <div class="f-label-config-data-dic-checkbox">
                                        <el-checkbox-group v-model="dictChecked" v-on:change="handledDictCheckedChange">
                                            <el-checkbox v-for="par in dictPars" :label="par.dic_par_id" :key="par.dic_par_id">{{par.dic_par_name}}</el-checkbox>
                                        </el-checkbox-group>
                                    </div>
                                </div>
                                <div v-else-if="tempDataSourceConfig.data_source_type===DataSourceType.Custom" class="f-label-config-data-type">
                                    <el-form :model="tempDataSourceConfig" ref="dynamicValidateForm" label-width="80px">
                                        <el-form-item prop="value"
                                                      label="数据值"
                                                      :rules="[{ required: true, message: '请输入数据值', trigger: 'blur' }]">
                                            <el-input v-model="tempDataSourceConfig.value" type="textarea" :autosize="{ minRows: 3, maxRows: 5}"></el-input>
                                        </el-form-item>
                                        <el-form-item prop="separtor"
                                                      label="分割符"
                                                      :rules="[{ required: true, message: '请输入分割符', trigger: 'blur' }]">
                                            <el-input v-model="tempDataSourceConfig.separtor"></el-input>
                                        </el-form-item>
                                        <el-form-item label="结果预览">
                                            <span v-text="getDataSourceConfigCustomResult()"></span>
                                        </el-form-item>
                                    </el-form>
                                </div>
                                <div v-else-if="tempDataSourceConfig.data_source_type===DataSourceType.DataApi" class="f-label-config-data-type">
                                    <div>
                                        <span>数据源</span>
                                        <el-select v-model="tempDataSourceConfig.api_id" v-on:change="handledDataApiChange" clearable placeholder="请选择">
                                            <el-option v-for="(api,index) in dataApis" :key="index"
                                                       :label="api.api_name"
                                                       :value="api.api_id">
                                            </el-option>
                                        </el-select>
                                    </div>
                                    <div v-if="tempDataSourceConfig.api_id!==''" style="margin-top:10px;">
                                        <el-row v-for="(param,index) in tempDataApiParam" :key="index">
                                            <el-col :span="8" style="text-align:right;height:40px;line-height:40px;">
                                                <span v-text="param.parameter_name_chs+' ('+(param.is_required?'必填':'选填')+')'"></span>
                                            </el-col>
                                            <el-col :span="4" style="text-align:center;height:40px;line-height:40px;">
                                                <i class="iconfont icon-zhixiang" style="font-size:24px;"></i>
                                            </el-col>
                                            <el-col :span="8">
                                                <el-select v-model="param.parameter_value" :clearable="!param.is_required" filterable placeholder="请选择">
                                                    <el-option label="变量1" value="变量1"></el-option>
                                                    <el-option label="变量2" value="变量2"></el-option>
                                                    <el-option label="变量3" value="变量3"></el-option>
                                                    <el-option label="变量4" value="变量4"></el-option>
                                                    <el-option label="变量5" value="变量5"></el-option>
                                                </el-select>
                                            </el-col>
                                        </el-row>
                                    </div>
                                </div>
                            </el-tab-pane>
                            <el-tab-pane label="关联" name="relate"></el-tab-pane>
                            <el-tab-pane label="格式化" name="format"></el-tab-pane>
                        </el-tabs>
                        <el-tabs v-model="tabActiveName" v-else-if="currentLabelData.label_config.control_config.control_type==='radio'">
                            <el-tab-pane label="常规" name="normal">
                                <el-form :ref="'Form'+currentLabelData.label_id" :model="currentLabelData" label-width="120px">
                                    <el-form-item label="标签中文名" prop="label_name_chs" :rules="[{ required: true, message: '请输入标签中文名', trigger: 'blur' }]">
                                        <el-input v-model="currentLabelData.label_name_chs" placeholder="请输入标签中文名"></el-input>
                                    </el-form-item>
                                    <el-form-item label="分组名称">
                                        <el-input v-model="currentLabelData.label_config.control_config.group_name" placeholder="请输入分组名称"></el-input>
                                    </el-form-item>
                                    <el-form-item label="默认值">
                                        <el-input v-model="currentLabelData.default_value" placeholder="请输入默认值"></el-input>
                                    </el-form-item>
                                    <el-form-item label="数据类型">
                                        <el-select v-model="currentLabelData.data_type" placeholder="请选择数据类型">
                                            <el-option v-for="(value,key) in DataType" :key="value"
                                                       :label="key" :value="value"></el-option>
                                        </el-select>
                                    </el-form-item>
                                    <el-form-item label="是否只读">
                                        <el-radio-group v-model="getLableConfigItem('readonly').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                    <el-form-item label="是否有边框">
                                        <el-radio-group v-model="getLableConfigItem('border').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                </el-form>
                            </el-tab-pane>
                            <el-tab-pane label="验证" name="validator"></el-tab-pane>
                            <el-tab-pane label="数据源" name="data">
                                <div>
                                    <span>数据源类型</span>
                                    <el-select v-model="tempDataSourceConfig.data_source_type" v-on:change="handledDataTypeChange" clearable placeholder="请选择">
                                        <el-option v-for="(value,key) in DataSourceType" :key="value"
                                                   :label="key"
                                                   :value="value">
                                        </el-option>
                                    </el-select>
                                </div>
                                <div v-if="tempDataSourceConfig.data_source_type===DataSourceType.Dict" class="f-label-config-data-type">
                                    <div>
                                        <span>字典类型</span>
                                        <el-select v-model="tempDataSourceConfig.dic_type_id" v-on:change="handledDictTypeChange" clearable placeholder="请选择">
                                            <el-option v-for="(dict,index) in DictTest" :key="index"
                                                       :label="dict.dic_type_name"
                                                       :value="dict.dic_type_id">
                                            </el-option>
                                        </el-select>
                                    </div>
                                    <div v-if="tempDataSourceConfig.dic_type_id!==''" style="margin-top:10px;">
                                        <el-checkbox :indeterminate="dictIndeterminate" v-model="dictIndeterminateCheckAll" v-on:change="handleDictIndeterminateCheckAll">全选</el-checkbox>
                                    </div>
                                    <div class="f-label-config-data-dic-checkbox">
                                        <el-checkbox-group v-model="dictChecked" v-on:change="handledDictCheckedChange">
                                            <el-checkbox v-for="par in dictPars" :label="par.dic_par_id" :key="par.dic_par_id">{{par.dic_par_name}}</el-checkbox>
                                        </el-checkbox-group>
                                    </div>
                                </div>
                                <div v-else-if="tempDataSourceConfig.data_source_type===DataSourceType.Custom" class="f-label-config-data-type">
                                    <el-form :model="tempDataSourceConfig" ref="dynamicValidateForm" label-width="80px">
                                        <el-form-item prop="value"
                                                      label="数据值"
                                                      :rules="[{ required: true, message: '请输入数据值', trigger: 'blur' }]">
                                            <el-input v-model="tempDataSourceConfig.value" type="textarea" :autosize="{ minRows: 3, maxRows: 5}"></el-input>
                                        </el-form-item>
                                        <el-form-item prop="separtor"
                                                      label="分割符"
                                                      :rules="[{ required: true, message: '请输入分割符', trigger: 'blur' }]">
                                            <el-input v-model="tempDataSourceConfig.separtor"></el-input>
                                        </el-form-item>
                                        <el-form-item label="结果预览">
                                            <span v-text="getDataSourceConfigCustomResult()"></span>
                                        </el-form-item>
                                    </el-form>
                                </div>
                                <div v-else-if="tempDataSourceConfig.data_source_type===DataSourceType.DataApi" class="f-label-config-data-type">
                                    <div>
                                        <span>数据源</span>
                                        <el-select v-model="tempDataSourceConfig.api_id" v-on:change="handledDataApiChange" clearable placeholder="请选择">
                                            <el-option v-for="(api,index) in dataApis" :key="index"
                                                       :label="api.api_name"
                                                       :value="api.api_id">
                                            </el-option>
                                        </el-select>
                                    </div>
                                    <div v-if="tempDataSourceConfig.api_id!==''" style="margin-top:10px;">
                                        <el-row v-for="(param,index) in tempDataApiParam" :key="index">
                                            <el-col :span="8" style="text-align:right;height:40px;line-height:40px;">
                                                <span v-text="param.parameter_name_chs+' ('+(param.is_required?'必填':'选填')+')'"></span>
                                            </el-col>
                                            <el-col :span="4" style="text-align:center;height:40px;line-height:40px;">
                                                <i class="iconfont icon-zhixiang" style="font-size:24px;"></i>
                                            </el-col>
                                            <el-col :span="8">
                                                <el-select v-model="param.parameter_value" :clearable="!param.is_required" filterable placeholder="请选择">
                                                    <el-option label="变量1" value="变量1"></el-option>
                                                    <el-option label="变量2" value="变量2"></el-option>
                                                    <el-option label="变量3" value="变量3"></el-option>
                                                    <el-option label="变量4" value="变量4"></el-option>
                                                    <el-option label="变量5" value="变量5"></el-option>
                                                </el-select>
                                            </el-col>
                                        </el-row>
                                    </div>
                                </div>
                            </el-tab-pane>
                            <el-tab-pane label="关联" name="relate"></el-tab-pane>
                            <el-tab-pane label="格式化" name="format"></el-tab-pane>
                        </el-tabs>
                        <el-tabs v-model="tabActiveName" v-else-if="currentLabelData.label_config.control_config.control_type==='checkbox'">
                            <el-tab-pane label="常规" name="normal">
                                <el-form :ref="'Form'+currentLabelData.label_id" :model="currentLabelData" label-width="120px">
                                    <el-form-item label="标签中文名" prop="label_name_chs" :rules="[{ required: true, message: '请输入标签中文名', trigger: 'blur' }]">
                                        <el-input v-model="currentLabelData.label_name_chs" placeholder="请输入标签中文名"></el-input>
                                    </el-form-item>
                                    <el-form-item label="分组名称">
                                        <el-input v-model="currentLabelData.label_config.control_config.group_name" placeholder="请输入分组名称"></el-input>
                                    </el-form-item>
                                    <el-form-item label="默认值">
                                        <el-input v-model="currentLabelData.default_value" placeholder="请输入默认值"></el-input>
                                    </el-form-item>
                                    <el-form-item label="数据类型">
                                        <el-select v-model="currentLabelData.data_type" placeholder="请选择数据类型">
                                            <el-option v-for="(value,key) in DataType" :key="value"
                                                       :label="key" :value="value"></el-option>
                                        </el-select>
                                    </el-form-item>
                                    <el-form-item label="是否只读">
                                        <el-radio-group v-model="getLableConfigItem('readonly').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                    <el-form-item label="是否有边框">
                                        <el-radio-group v-model="getLableConfigItem('border').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                </el-form>
                            </el-tab-pane>
                            <el-tab-pane label="验证" name="validator"></el-tab-pane>
                            <el-tab-pane label="数据源" name="data">
                                <div>
                                    <span>数据源类型</span>
                                    <el-select v-model="tempDataSourceConfig.data_source_type" v-on:change="handledDataTypeChange" clearable placeholder="请选择">
                                        <el-option v-for="(value,key) in DataSourceType" :key="value"
                                                   :label="key"
                                                   :value="value">
                                        </el-option>
                                    </el-select>
                                </div>
                                <div v-if="tempDataSourceConfig.data_source_type===DataSourceType.Dict" class="f-label-config-data-type">
                                    <div>
                                        <span>字典类型</span>
                                        <el-select v-model="tempDataSourceConfig.dic_type_id" v-on:change="handledDictTypeChange" clearable placeholder="请选择">
                                            <el-option v-for="(dict,index) in DictTest" :key="index"
                                                       :label="dict.dic_type_name"
                                                       :value="dict.dic_type_id">
                                            </el-option>
                                        </el-select>
                                    </div>
                                    <div v-if="tempDataSourceConfig.dic_type_id!==''" style="margin-top:10px;">
                                        <el-checkbox :indeterminate="dictIndeterminate" v-model="dictIndeterminateCheckAll" v-on:change="handleDictIndeterminateCheckAll">全选</el-checkbox>
                                    </div>
                                    <div class="f-label-config-data-dic-checkbox">
                                        <el-checkbox-group v-model="dictChecked" v-on:change="handledDictCheckedChange">
                                            <el-checkbox v-for="par in dictPars" :label="par.dic_par_id" :key="par.dic_par_id">{{par.dic_par_name}}</el-checkbox>
                                        </el-checkbox-group>
                                    </div>
                                </div>
                                <div v-else-if="tempDataSourceConfig.data_source_type===DataSourceType.Custom" class="f-label-config-data-type">
                                    <el-form :model="tempDataSourceConfig" ref="dynamicValidateForm" label-width="80px">
                                        <el-form-item prop="value"
                                                      label="数据值"
                                                      :rules="[{ required: true, message: '请输入数据值', trigger: 'blur' }]">
                                            <el-input v-model="tempDataSourceConfig.value" type="textarea" :autosize="{ minRows: 3, maxRows: 5}"></el-input>
                                        </el-form-item>
                                        <el-form-item prop="separtor"
                                                      label="分割符"
                                                      :rules="[{ required: true, message: '请输入分割符', trigger: 'blur' }]">
                                            <el-input v-model="tempDataSourceConfig.separtor"></el-input>
                                        </el-form-item>
                                        <el-form-item label="结果预览">
                                            <span v-text="getDataSourceConfigCustomResult()"></span>
                                        </el-form-item>
                                    </el-form>
                                </div>
                                <div v-else-if="tempDataSourceConfig.data_source_type===DataSourceType.DataApi" class="f-label-config-data-type">
                                    <div>
                                        <span>数据源</span>
                                        <el-select v-model="tempDataSourceConfig.api_id" v-on:change="handledDataApiChange" clearable placeholder="请选择">
                                            <el-option v-for="(api,index) in dataApis" :key="index"
                                                       :label="api.api_name"
                                                       :value="api.api_id">
                                            </el-option>
                                        </el-select>
                                    </div>
                                    <div v-if="tempDataSourceConfig.api_id!==''" style="margin-top:10px;">
                                        <el-row v-for="(param,index) in tempDataApiParam" :key="index">
                                            <el-col :span="8" style="text-align:right;height:40px;line-height:40px;">
                                                <span v-text="param.parameter_name_chs+' ('+(param.is_required?'必填':'选填')+')'"></span>
                                            </el-col>
                                            <el-col :span="4" style="text-align:center;height:40px;line-height:40px;">
                                                <i class="iconfont icon-zhixiang" style="font-size:24px;"></i>
                                            </el-col>
                                            <el-col :span="8">
                                                <el-select v-model="param.parameter_value" :clearable="!param.is_required" filterable placeholder="请选择">
                                                    <el-option label="变量1" value="变量1"></el-option>
                                                    <el-option label="变量2" value="变量2"></el-option>
                                                    <el-option label="变量3" value="变量3"></el-option>
                                                    <el-option label="变量4" value="变量4"></el-option>
                                                    <el-option label="变量5" value="变量5"></el-option>
                                                </el-select>
                                            </el-col>
                                        </el-row>
                                    </div>
                                </div>
                            </el-tab-pane>
                            <el-tab-pane label="关联" name="relate"></el-tab-pane>
                            <el-tab-pane label="格式化" name="format"></el-tab-pane>
                        </el-tabs>
                        <el-tabs v-model="tabActiveName" v-else-if="currentLabelData.label_config.control_config.control_type==='time'">
                            <el-tab-pane label="常规" name="normal">
                                <el-form :ref="'Form'+currentLabelData.label_id" :model="currentLabelData" label-width="120px">
                                    <el-form-item label="标签中文名" prop="label_name_chs" :rules="[{ required: true, message: '请输入标签中文名', trigger: 'blur' }]">
                                        <el-input v-model="currentLabelData.label_name_chs" placeholder="请输入标签中文名"></el-input>
                                    </el-form-item>
                                    <el-form-item label="分组名称">
                                        <el-input v-model="currentLabelData.label_config.control_config.group_name" placeholder="请输入分组名称"></el-input>
                                    </el-form-item>
                                    <el-form-item label="默认值">
                                        <el-input v-model="currentLabelData.default_value" placeholder="请输入默认值"></el-input>
                                    </el-form-item>
                                    <el-form-item label="数据类型">
                                        <el-select v-model="currentLabelData.data_type" placeholder="请选择数据类型">
                                            <el-option v-for="(value,key) in DataType" :key="value"
                                                       :label="key" :value="value"></el-option>
                                        </el-select>
                                    </el-form-item>
                                    <el-form-item label="占位文本">
                                        <el-input v-model="getLableConfigItem('placeholder').value" placeholder="请输入占位文本"></el-input>
                                    </el-form-item>
                                    <el-form-item label="是否可清空">
                                        <el-radio-group v-model="getLableConfigItem('clearable').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                    <el-form-item label="是否只读">
                                        <el-radio-group v-model="getLableConfigItem('readonly').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                </el-form>
                            </el-tab-pane>
                            <el-tab-pane label="验证" name="validator"></el-tab-pane>
                            <el-tab-pane label="数据源" name="data"></el-tab-pane>
                            <el-tab-pane label="关联" name="relate"></el-tab-pane>
                            <el-tab-pane label="格式化" name="format"></el-tab-pane>
                        </el-tabs>
                        <el-tabs v-model="tabActiveName" v-else-if="currentLabelData.label_config.control_config.control_type==='date'">
                            <el-tab-pane label="常规" name="normal">
                                <el-form :ref="'Form'+currentLabelData.label_id" :model="currentLabelData" label-width="120px">
                                    <el-form-item label="标签中文名" prop="label_name_chs" :rules="[{ required: true, message: '请输入标签中文名', trigger: 'blur' }]">
                                        <el-input v-model="currentLabelData.label_name_chs" placeholder="请输入标签中文名"></el-input>
                                    </el-form-item>
                                    <el-form-item label="分组名称">
                                        <el-input v-model="currentLabelData.label_config.control_config.group_name" placeholder="请输入分组名称"></el-input>
                                    </el-form-item>
                                    <el-form-item label="默认值">
                                        <el-input v-model="currentLabelData.default_value" placeholder="请输入默认值"></el-input>
                                    </el-form-item>
                                    <el-form-item label="数据类型">
                                        <el-select v-model="currentLabelData.data_type" placeholder="请选择数据类型">
                                            <el-option v-for="(value,key) in DataType" :key="value"
                                                       :label="key" :value="value"></el-option>
                                        </el-select>
                                    </el-form-item>
                                    <el-form-item label="占位文本">
                                        <el-input v-model="getLableConfigItem('placeholder').value" placeholder="请输入占位文本"></el-input>
                                    </el-form-item>
                                    <el-form-item label="是否可清空">
                                        <el-radio-group v-model="getLableConfigItem('clearable').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                    <el-form-item label="是否只读">
                                        <el-radio-group v-model="getLableConfigItem('readonly').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                </el-form>
                            </el-tab-pane>
                            <el-tab-pane label="验证" name="validator"></el-tab-pane>
                            <el-tab-pane label="数据源" name="data"></el-tab-pane>
                            <el-tab-pane label="关联" name="relate"></el-tab-pane>
                            <el-tab-pane label="格式化" name="format"></el-tab-pane>
                        </el-tabs>
                        <el-tabs v-model="tabActiveName" v-else-if="currentLabelData.label_config.control_config.control_type==='switch'">
                            <el-tab-pane label="常规" name="normal">
                                <el-form :ref="'Form'+currentLabelData.label_id" :model="currentLabelData" label-width="120px">
                                    <el-form-item label="标签中文名" prop="label_name_chs" :rules="[{ required: true, message: '请输入标签中文名', trigger: 'blur' }]">
                                        <el-input v-model="currentLabelData.label_name_chs" placeholder="请输入标签中文名"></el-input>
                                    </el-form-item>
                                    <el-form-item label="分组名称">
                                        <el-input v-model="currentLabelData.label_config.control_config.group_name" placeholder="请输入分组名称"></el-input>
                                    </el-form-item>
                                    <el-form-item label="默认值">
                                        <el-input v-model="currentLabelData.default_value" placeholder="请输入默认值"></el-input>
                                    </el-form-item>
                                    <el-form-item label="数据类型">
                                        <el-select v-model="currentLabelData.data_type" placeholder="请选择数据类型">
                                            <el-option v-for="(value,key) in DataType" :key="value"
                                                       :label="key" :value="value"></el-option>
                                        </el-select>
                                    </el-form-item>
                                    <el-form-item label="是否只读">
                                        <el-radio-group v-model="getLableConfigItem('readonly').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                    <el-form-item label="打开文字">
                                        <el-input v-model="getLableConfigItem('active-text').value" placeholder="请输入打开时的文字"></el-input>
                                    </el-form-item>
                                    <el-form-item label="关闭文字">
                                        <el-input v-model="getLableConfigItem('inactive-text').value" placeholder="请输入关闭时的文字"></el-input>
                                    </el-form-item>
                                </el-form>
                            </el-tab-pane>
                            <el-tab-pane label="验证" name="validator"></el-tab-pane>
                            <el-tab-pane label="数据源" name="data"></el-tab-pane>
                            <el-tab-pane label="关联" name="relate"></el-tab-pane>
                            <el-tab-pane label="格式化" name="format"></el-tab-pane>
                        </el-tabs>
                        <el-tabs v-model="tabActiveName" v-else-if="currentLabelData.label_config.control_config.control_type==='input_number'">
                            <el-tab-pane label="常规" name="normal">
                                <el-form :ref="'Form'+currentLabelData.label_id" :model="currentLabelData" label-width="120px">
                                    <el-form-item label="标签中文名" prop="label_name_chs" :rules="[{ required: true, message: '请输入标签中文名', trigger: 'blur' }]">
                                        <el-input v-model="currentLabelData.label_name_chs" placeholder="请输入标签中文名"></el-input>
                                    </el-form-item>
                                    <el-form-item label="分组名称">
                                        <el-input v-model="currentLabelData.label_config.control_config.group_name" placeholder="请输入分组名称"></el-input>
                                    </el-form-item>
                                    <el-form-item label="默认值">
                                        <el-input v-model="currentLabelData.default_value" placeholder="请输入默认值"></el-input>
                                    </el-form-item>
                                    <el-form-item label="数据类型">
                                        <el-select v-model="currentLabelData.data_type" placeholder="请选择数据类型">
                                            <el-option v-for="(value,key) in DataType" :key="value"
                                                       :label="key" :value="value"></el-option>
                                        </el-select>
                                    </el-form-item>
                                    <el-form-item label="占位文本">
                                        <el-input v-model="getLableConfigItem('placeholder').value" placeholder="请输入占位文本"></el-input>
                                    </el-form-item>
                                    <el-form-item label="是否只读">
                                        <el-radio-group v-model="getLableConfigItem('readonly').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                    <el-form-item label="按钮位置">
                                        <el-radio-group v-model="getLableConfigItem('controls-position').value">
                                            <el-radio label="normal">常规</el-radio>
                                            <el-radio label="right">靠右</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                    <el-form-item label="数值精度">
                                        <el-input v-model="getLableConfigItem('precision').value" placeholder="请输入数值精度"></el-input>
                                    </el-form-item>
                                    <el-form-item label="最小值">
                                        <el-input v-model="getLableConfigItem('min').value" placeholder="请输入最小值"></el-input>
                                    </el-form-item>
                                    <el-form-item label="最大值">
                                        <el-input v-model="getLableConfigItem('max').value" placeholder="请输入最大值"></el-input>
                                    </el-form-item>
                                    <el-form-item label="步长">
                                        <el-input v-model="getLableConfigItem('step').value" placeholder="请输入步长"></el-input>
                                    </el-form-item>
                                </el-form>
                            </el-tab-pane>
                            <el-tab-pane label="验证" name="validator"></el-tab-pane>
                            <el-tab-pane label="数据源" name="data"></el-tab-pane>
                            <el-tab-pane label="关联" name="relate"></el-tab-pane>
                            <el-tab-pane label="格式化" name="format"></el-tab-pane>
                        </el-tabs>
                        <el-tabs v-model="tabActiveName" v-else-if="currentLabelData.label_config.control_config.control_type==='slider'">
                            <el-tab-pane label="常规" name="normal">
                                <el-form :ref="'Form'+currentLabelData.label_id" :model="currentLabelData" label-width="120px">
                                    <el-form-item label="标签中文名" prop="label_name_chs" :rules="[{ required: true, message: '请输入标签中文名', trigger: 'blur' }]">
                                        <el-input v-model="currentLabelData.label_name_chs" placeholder="请输入标签中文名"></el-input>
                                    </el-form-item>
                                    <el-form-item label="分组名称">
                                        <el-input v-model="currentLabelData.label_config.control_config.group_name" placeholder="请输入分组名称"></el-input>
                                    </el-form-item>
                                    <el-form-item label="默认值">
                                        <el-input v-model="currentLabelData.default_value" placeholder="请输入默认值"></el-input>
                                    </el-form-item>
                                    <el-form-item label="数据类型">
                                        <el-select v-model="currentLabelData.data_type" placeholder="请选择数据类型">
                                            <el-option v-for="(value,key) in DataType" :key="value"
                                                       :label="key" :value="value"></el-option>
                                        </el-select>
                                    </el-form-item>
                                    <el-form-item label="是否只读">
                                        <el-radio-group v-model="getLableConfigItem('readonly').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                    <el-form-item label="最小值">
                                        <el-input v-model="getLableConfigItem('min').value" placeholder="请输入最小值"></el-input>
                                    </el-form-item>
                                    <el-form-item label="最大值">
                                        <el-input v-model="getLableConfigItem('max').value" placeholder="请输入最大值"></el-input>
                                    </el-form-item>
                                    <el-form-item label="步长">
                                        <el-input v-model="getLableConfigItem('step').value" placeholder="请输入步长"></el-input>
                                    </el-form-item>
                                    <el-form-item label="是否显示断点">
                                        <el-radio-group v-model="getLableConfigItem('show-stops').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                    <el-form-item label="是否显示提示">
                                        <el-radio-group v-model="getLableConfigItem('show-tooltip').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                    <el-form-item label="格式化提示">
                                        <el-input v-model="getLableConfigItem('format-tooltip').value" placeholder="请输入格式化提示"></el-input>
                                    </el-form-item>
                                </el-form>
                            </el-tab-pane>
                            <el-tab-pane label="验证" name="validator"></el-tab-pane>
                            <el-tab-pane label="数据源" name="data"></el-tab-pane>
                            <el-tab-pane label="关联" name="relate"></el-tab-pane>
                            <el-tab-pane label="格式化" name="format"></el-tab-pane>
                        </el-tabs>
                        <el-tabs v-model="tabActiveName" v-else-if="currentLabelData.label_config.control_config.control_type==='rate'">
                            <el-tab-pane label="常规" name="normal">
                                <el-form :ref="'Form'+currentLabelData.label_id" :model="currentLabelData" label-width="120px">
                                    <el-form-item label="标签中文名" prop="label_name_chs" :rules="[{ required: true, message: '请输入标签中文名', trigger: 'blur' }]">
                                        <el-input v-model="currentLabelData.label_name_chs" placeholder="请输入标签中文名"></el-input>
                                    </el-form-item>
                                    <el-form-item label="分组名称">
                                        <el-input v-model="currentLabelData.label_config.control_config.group_name" placeholder="请输入分组名称"></el-input>
                                    </el-form-item>
                                    <el-form-item label="默认值">
                                        <el-input v-model="currentLabelData.default_value" placeholder="请输入默认值"></el-input>
                                    </el-form-item>
                                    <el-form-item label="数据类型">
                                        <el-select v-model="currentLabelData.data_type" placeholder="请选择数据类型">
                                            <el-option v-for="(value,key) in DataType" :key="value"
                                                       :label="key" :value="value"></el-option>
                                        </el-select>
                                    </el-form-item>
                                    <el-form-item label="是否只读">
                                        <el-radio-group v-model="getLableConfigItem('readonly').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                    <el-form-item label="是否可半选">
                                        <el-radio-group v-model="getLableConfigItem('allow-half').value">
                                            <el-radio :label="false">否</el-radio>
                                            <el-radio :label="true">是</el-radio>
                                        </el-radio-group>
                                    </el-form-item>
                                    <el-form-item label="最大值">
                                        <el-input v-model="getLableConfigItem('max').value" placeholder="请输入最大值"></el-input>
                                    </el-form-item>
                                </el-form>
                            </el-tab-pane>
                            <el-tab-pane label="验证" name="validator"></el-tab-pane>
                            <el-tab-pane label="数据源" name="data"></el-tab-pane>
                            <el-tab-pane label="关联" name="relate"></el-tab-pane>
                            <el-tab-pane label="格式化" name="format"></el-tab-pane>
                        </el-tabs>
                        <el-tabs v-model="tabActiveName" v-else-if="currentLabelData.label_config.control_config.control_type==='map_baidu'">
                            <el-tab-pane label="常规" name="normal"></el-tab-pane>
                            <el-tab-pane label="验证" name="validator"></el-tab-pane>
                            <el-tab-pane label="数据源" name="data"></el-tab-pane>
                            <el-tab-pane label="关联" name="relate"></el-tab-pane>
                            <el-tab-pane label="格式化" name="format"></el-tab-pane>
                        </el-tabs>
                        <el-tabs v-model="tabActiveName" v-else-if="currentLabelData.label_config.control_config.control_type==='map_gis'">
                            <el-tab-pane label="常规" name="normal"></el-tab-pane>
                            <el-tab-pane label="验证" name="validator"></el-tab-pane>
                            <el-tab-pane label="数据源" name="data"></el-tab-pane>
                            <el-tab-pane label="关联" name="relate"></el-tab-pane>
                            <el-tab-pane label="格式化" name="format"></el-tab-pane>
                        </el-tabs>
                    </div>
                    <div v-else-if="currentLabelData.label_type===LabelType.variable">
                        <el-form :ref="'Form'+currentLabelData.label_id" :model="currentLabelData" label-width="120px">
                            <el-form-item label="标签中文名" prop="label_name_chs" :rules="[{ required: true, message: '请输入标签中文名', trigger: 'blur' }]">
                                <el-input v-model="currentLabelData.label_name_chs" placeholder="请输入标签中文名"></el-input>
                            </el-form-item>

                            <el-form-item label="数据类型">
                                <el-select v-model="currentLabelData.data_type" placeholder="请选择数据类型">
                                    <el-option v-for="(value,key) in DataType" :key="value"
                                               :label="key" :value="value"></el-option>
                                </el-select>
                            </el-form-item>
                            <el-form-item label="是否传出参数">
                                <el-radio-group v-model="currentLabelData.label_config.is_parameter">
                                    <el-radio :label="false">否</el-radio>
                                    <el-radio :label="true">是</el-radio>
                                </el-radio-group>
                            </el-form-item>
                            <el-form-item label="取值方式">
                                <el-select v-model="currentLabelData.label_config.value_method">
                                    <el-option v-for="(value,key) in ValueMethod" :key="value"
                                               :label="key" :value="value"></el-option>
                                </el-select>
                            </el-form-item>
                            <el-form-item label="值" v-if="currentLabelData.label_config.value_method===ValueMethod.Const">
                                <el-input v-model="currentLabelData.default_value" placeholder="请输入内容" clearable></el-input>
                            </el-form-item>
                            <el-form-item label="值" v-else>
                                <el-input placeholder="请输入内容"
                                          v-model="currentLabelData.default_value"
                                          v-on:focus="formulaDataVisible=true"
                                          clearable
                                          style="width:270px;"></el-input>
                                <el-button type="text" v-on:click="formulaExampleDataVisible=true">点击参考</el-button>
                            </el-form-item>
                        </el-form>
                        <el-dialog title="设置公式"
                                   :visible.sync="formulaDataVisible"
                                   width="50%">
                            <div style="display:flex;">
                                <div style="flex:0 0 220px;">
                                    <div>
                                        <el-button style="margin:0 0 10px 10px;" v-on:click="formulaDataOperation(Operation.Plus)">
                                            <i class="iconfont icon-yunsuan-jia"></i>
                                        </el-button>
                                        <el-button style="margin:0 0 10px 10px;" v-on:click="formulaDataOperation(Operation.Minus)">
                                            <i class="iconfont icon-yunsuan-jian"></i>
                                        </el-button>
                                        <el-button style="margin:0 0 10px 10px;" v-on:click="formulaDataOperation(Operation.Multiply)">
                                            <i class="iconfont icon-yunsuan-cheng"></i>
                                        </el-button>
                                    </div>
                                    <div>
                                        <el-button style="margin:0 0 10px 10px;" v-on:click="formulaDataOperation(Operation.Divide)">
                                            <i class="iconfont icon-yunsuan-chu"></i>
                                        </el-button>
                                        <el-button style="margin:0 0 10px 10px;" v-on:click="formulaDataOperation(Operation.LeftParentheses)">
                                            <i class="iconfont icon-yunsuan-zuokuohao"></i>
                                        </el-button>
                                        <el-button style="margin:0 0 10px 10px;" v-on:click="formulaDataOperation(Operation.RightParentheses)">
                                            <i class="iconfont icon-yunsuan-youkuohao"></i>
                                        </el-button>
                                    </div>
                                    <div>
                                        <vue-scrollbar classes="formula-data-scrollbar" ref="FormulaDataScrollbar">
                                            <div class="scroll-me">
                                                <div v-for="(item,index) in getLabelsExceptSelf()" :key="index" 
                                                     v-on:click="formulaDataLabelClick(item)"
                                                     style="padding:5px 10px;cursor:pointer;">
                                                    <span style="color:#e6a23c;">@@</span><span v-text="item.label_name_chs"></span>
                                                </div>
                                            </div>
                                        </vue-scrollbar>
                                    </div>
                                </div>
                                <div style="flex:1">
                                    <div style="text-align:right;margin-bottom:10px;">
                                        <el-button title="清除" type="warning" style="font-size:17px;" v-on:click="formulaDataClear">C</el-button>
                                        <el-button title="撤回" v-on:click="formulaDataReturnBack">
                                            <i class="iconfont icon-chexiao"></i>
                                        </el-button>
                                    </div>
                                    <el-input type="textarea"
                                              :autosize="{ minRows: 8, maxRows: 12}"
                                              resize="none"
                                              placeholder="请输入公式"
                                              v-on:change="formulaDataChange"
                                              v-model="currentLabelData.default_value">
                                    </el-input>
                                </div>
                            </div>
                        </el-dialog>
                        <el-dialog title="参考公式"
                                   :visible.sync="formulaExampleDataVisible"
                                   width="50%">
                            <el-table :data="formulaExampleData"
                                      border
                                      style="width: 100%">
                                <el-table-column prop="name"
                                                 label="名称"
                                                 width="180">
                                </el-table-column>
                                <el-table-column prop="example"
                                                 label="例子">
                                </el-table-column>
                            </el-table>
                        </el-dialog>
                    </div>
                    <div v-else-if="currentLabelData.label_type===LabelType.condition">

                    </div>
                    <div v-else style="padding:150px 0;text-align:center;color:#808080;">
                        请选择一个标签进行编辑
                    </div>
                </div>
                <div v-if="labelEditChange" class="form-config-right-content-btn">
                    <el-button type="danger" v-on:click="removeLabel">删除组件</el-button>
                    <el-button type="primary" v-on:click="saveLabelConfig">保存组件</el-button>
                </div>
            </div>
            <!--表单设置-->
            <el-dialog title="设置表单" :visible.sync="formSetVisible">
                <el-form :model="customerForm" :rules="customerFormRules" ref="CustomerForm" label-width="100px">
                    <el-form-item label="表单名称" prop="form_name">
                        <el-input v-model="customerForm.form_name"></el-input>
                    </el-form-item>
                    <el-form-item label="所属分类" prop="form_type">
                        <el-select v-model="customerForm.form_type" clearable placeholder="请选择表单分类">
                            <el-option label="查勘表单" value="4005001"></el-option>
                            <el-option label="立项表单" value="4005002"></el-option>
                            <el-option label="询价表单" value="4005003"></el-option>
                            <el-option label="其他表单" value="4005004"></el-option>
                        </el-select>
                    </el-form-item>
                    <el-form-item label="是否共享" prop="form_share">
                        <el-switch v-model="customerForm.form_share"></el-switch>
                    </el-form-item>
                    <el-form-item label="描述" prop="form_des">
                        <el-input type="textarea" v-model="customerForm.form_des"></el-input>
                    </el-form-item>
                    <el-form-item>
                        <el-button type="primary">确定</el-button>
                        <el-button v-on:click="formSetVisible = false">取消</el-button>
                    </el-form-item>
                </el-form>
            </el-dialog>
            <!--表单预览-->
            <el-dialog title="表单预览"
                       :visible.sync="formPreviewVisible"
                       v-on:opened="formPreviewOpen"
                       v-on:close="previewFormFresh"
                       class="f-form-preview-dialog"
                       width="60%">
                <div class="f-form-preview-control">
                    <el-button type="primary" size="medium" v-on:click="previewFormSetVisible=true" class="f-button-icon-text">
                        <i class="iconfont icon-jiemiansheji"></i><span>界面设置</span>
                    </el-button>
                    <el-button type="success" size="medium" v-on:click="submitPreviewForm" class="f-button-icon-text">
                        <i class="iconfont icon-tijiao"></i><span>提交测试</span>
                    </el-button>
                </div>
                <el-dialog title="界面设置"
                           :visible.sync="previewFormSetVisible"
                           :modal="false"
                           top="20vh"
                           width="30%">
                    <div class="f-form-preview-set-item">
                        <label>标签宽度</label>
                        <el-input-number v-model="labelWidth" :min="40" :max="200" :step="10" v-on:change="previewFormFresh">
                        </el-input-number>
                    </div>
                    <div class="f-form-preview-set-item">
                        <label>排列样式</label>
                        <el-radio-group v-model="column" v-on:change="previewFormFresh">
                            <el-radio :label="1">一列</el-radio>
                            <el-radio :label="2">两列</el-radio>
                            <el-radio :label="3">三列</el-radio>
                        </el-radio-group>
                    </div>
                    <div class="f-form-preview-set-item">
                        <label>对齐方式</label>
                        <el-radio-group v-model="align" v-on:change="previewFormFresh">
                            <el-radio label="right">右对齐</el-radio>
                            <el-radio label="left">左对齐</el-radio>
                            <el-radio label="top">顶部对齐</el-radio>
                        </el-radio-group>
                    </div>
                </el-dialog>
                <vue-scrollbar classes="dynamic-form-scrollbar" id="DynamicFormScrollbar" ref="DynamicFormScrollbar">
                    <div class="scroll-me">
                        <dynamic-form ref="DynamicForm"
                                      :form-id="formId"
                                      :label-width="labelWidth"
                                      :label-align="align"
                                      :form-column="column"
                                      :base-config="{userId:1,customerId:1,pcaCode:'4307'}"
                                      :on-success="onSuccess"
                                      :on-error="onError"
                                      :on-empty="onEmpty">
                        </dynamic-form>
                    </div>
                </vue-scrollbar>
            </el-dialog>
        </div>
    </div>
    <script src="~/Scripts/Home/FormEdit.js"></script>
</body>
</html>
